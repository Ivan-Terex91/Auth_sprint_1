[Инф-ра для запуска проекта](https://github.com/smdnv/Auth_sprint_1/pull/9)
1. Скопирован проект из предыдущего спринта, сервис для фильмов и etl.
2. Добавлен новый сервис auth в общий docker-compose.
3. Создана базовая структура проекта.

[Добавить основные api методы](https://github.com/smdnv/Auth_sprint_1/pull/10)
1. Добавлены вью для основных api методов.
2. Добавлены заглушки для будущих сервисов с бизнес логикой.

[Добавить сервис для токетов](https://github.com/smdnv/Auth_sprint_1/pull/11)
1. Добавлена сервис для генерации access и refresh токенов
2. Добавлен внутренний метод для проверки валидности access токена. Метод будет использоваться внешними сервисами (например api сервис фильмов) для проверки валидности токена клиента.

[Добавить сервис для пользователей](https://github.com/smdnv/Auth_sprint_1/pull/13)
1. Добавлен сервис для создания пользователя и просмотра данных профиля
2. Объединены сервис токенов и сервис клиетов, для реализации api методов signup, login, logout

[Добавить сервис для истории входа в аккаунт](https://github.com/smdnv/Auth_sprint_1/pull/14)
1. Добавлен сервис для истории входов/выходов из аккаунта
2. Добавлено использование сервиса в api методы login, logout

[Интеграция auth сервиса в movies api](https://github.com/smdnv/Auth_sprint_1/pull/12)
1. Добавлена проверки токена пользователя при обращении к методам сервиса фильмов


# Запуск проекта
1. Конфигурация маппинга портов для локального запуска
```
cp docker-compose.override.yml{.example,}
```
2. Переменные окружения для запуска
```
cp .env{.example,}
```
3. Запуск контейнеров
```
docker-compose up -d
```

* В проекте находится тестовая бд, которая автоматически разворачивается в контейнере с postgres.
* Etl создаст нужные индексы в elastic и скопирует данные, после запуска elastic контейнера.
```
docker-compose logs -f --tail 30 etl
```
для просмотра процесса синхронизации данных.


# Auth
При запуске контейнера auth создаются все нужные таблицы для моделей. Если нужно пересоздать таблицу, то нужно зайти в контейнер в pg, удалить все старые таблицы и перезапустить контейнер с auth сервисом

# Swagger
http://localhost:8001/

В сваггере можно проверить работоспособность всех методов.
1. `/api/v1/auth/signup/` - Создание пользователя, метод создает только пользователя, получить токены можно отдельным запросом в login
2. `/api/v1/auth/login/` - Вход по логину и паролю, возвращает пару access, refresh токенов. После получения токенов, можно добавить access токен в механизм авторизации сваггера, который доступен на странице сверху. После этого сваггер автоматически будет отправлять токен в запросе.
3. `/api/v1/profile/` - Запрос данных пользователя, как пример api метода, который доступен только залогиненному пользователю.


# Проектная работа 6 спринта


Проектная работа на первый спринт модуля Авторизацию. С этого модуля вы больше не будете получать чётко расписанное ТЗ. Требования менее фиксированные – придётся продумать архитектуру решения и декомпозировать задачи самим перед тем, как начать кодинг.

Задания на спринт вы найдёте в самих темах – как было в первом модуле, где вы делали Админку.
